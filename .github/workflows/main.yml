name: Build and distribute

on:
  push:
    branches:
      - main

jobs:
  build:
    name: build
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v2

      - uses: cedvdb/action-flutter-build-android@v1
        with:
          keystore-base64: "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"
          keystore-password: "6352368/"
          # optionals
          build-cmd: flutter build apk --release --flavor dev
          working-directory: ./
          
      - name: Archive APK
        uses: actions/upload-artifact@v2
        with:
          name: release-apk
          # Try running the build locally with the build command to be sure of this path
          path: build/app/outputs/flutter-apk/app-dev-release.apk
